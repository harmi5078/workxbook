<!DOCTYPE html>
<html class="ECLLIPDARK">
<head>
<meta charset="utf-8">
<title>人物列表</title>  
<link href="../bootstrap/5.1.1/bootstrap.min.css" rel="stylesheet">
<script src="../bootstrap/5.1.1/bootstrap.bundle.min.js"></script> 
<script src="../js/vue.global.js"></script>
<script src="../js/axios.min.js"></script>
<link href="css_book.css" rel="stylesheet"> 
<link href="css_modal.css" rel="stylesheet"> 
<script src="js_book.js"></script>
<script src="js_bookdb.js"></script>
</head>
<body>
<div id = "app"   > 
 <div id="persondiv"></div>
<div class="bk_content_frame">   
	 	 
<div class="bk_content_title" style="z-index: 1065; " >  
	   
		  
		<div   style="width: 23% ;padding-left: 20px;">
			 <b>历史人物列表 </b> 
		</div >	
		<div   style="width: 45% ">
			 {{person.name}}
				 
		</div >	 
		<div  style="width: 23% ;padding-top: 5px;padding-bottom: 5px;" > 
				<input type="text" 
				@change="reloadData()"
				v-model="ftarname"  
				class="tb_input_text" placeholder="人物信息关键词">
		</div >	           
</div >   	 
		 
	<div class="bk_onerow"  style="margin-top:45px;margin-bottom:10px; "> 
		 
		<div v-for="per in persons"
		 class="person_card" 
		 style="width:19.85%;margin-top:1px;margin-right: 1px;" 
		 @mouseover="toEdit(per)" >
			
			<div  class="bk_onerow person_card_title" > 
				<div   style="width: 92%;padding-left:16px;"  > 
					<a  v-bind:href="'target.html?tarid='+ per.id" target="_blank" >{{ per.name }}</a> 
				</div >
				
				<div   style="width:8%;"  > 
					 
					<div  v-if="tarid==per.id"  > 
				 		<span  style="cursor: pointer; " @click="showW(per)"  >     
						  <svg width="18" height="18" fill="currentColor"   viewBox="0 0 16 16">
							  <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
							  <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
							</svg>
						</span>  
					</div > 	
					 
				</div >
			 
				
			</div>
			<div  class="card-body" v-bind:title="per.detail"> 
				<p>{{ cutContent(per.detail )}}</p> 
			</div>
			
		</div>	
	</div>   
</div>
 
 
<div class="fixed-btn"> 
	<a  class="fixed-btn-a" href="index.html"> 
	<svg xmlns="img/index.svg" width="25" height="25" fill="currentColor"   viewBox="0 0 16 16">
	  <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5Z"/>
	  <path d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6Z"/>
	</svg>
	</a>
	 
	 
	<a  class="fixed-btn-a"  href="govpost.html"  target="_blank"> 
	<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"  fill="currentColor"   viewBox="0 0 16 16">
	  <path fill-rule="evenodd" d="M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"/>
	  <path d="M8.256 14a4.474 4.474 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10c.26 0 .507.009.74.025.226-.341.496-.65.804-.918C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4s1 1 1 1h5.256Z"/>
	  <path fill-rule="evenodd" d="M11.886 9.46c.18-.613 1.048-.613 1.229 0l.043.148a.64.64 0 0 0 .921.382l.136-.074c.561-.306 1.175.308.87.869l-.075.136a.64.64 0 0 0 .382.92l.149.045c.612.18.612 1.048 0 1.229l-.15.043a.64.64 0 0 0-.38.921l.074.136c.305.561-.309 1.175-.87.87l-.136-.075a.64.64 0 0 0-.92.382l-.045.149c-.18.612-1.048.612-1.229 0l-.043-.15a.64.64 0 0 0-.921-.38l-.136.074c-.561.305-1.175-.309-.87-.87l.075-.136a.64.64 0 0 0-.382-.92l-.148-.045c-.613-.18-.613-1.048 0-1.229l.148-.043a.64.64 0 0 0 .382-.921l-.074-.136c-.306-.561.308-1.175.869-.87l.136.075a.64.64 0 0 0 .92-.382l.045-.148ZM14 12.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"/>
	</svg>
	</a>
	<a  class="fixed-btn-a"  href="dynasty.html" target="_blank"> 
	<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-people" viewBox="0 0 16 16">
	  <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
	</svg>
	</a>
	
	<a  class="fixed-btn-a"  href="search.html"  target="_blank"> 
	   <svg xmlns="img/search.svg" width="25" height="25" fill="currentColor"   viewBox="0 0 16 16">
	  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
	</svg>
	</a>
    
    
</div> 

</div> 

   
<script>


  
const app = {
	data() {
		return {
			 persons:[]  ,
			 person:{},
			 tarid:0,
			 tarname:"",
			 tardetails:"",
			 neturl:"",
			 ftarname:""
		}
	}, 
	mounted () {
		this.reloadData()
	} ,
	methods: { 
		reloadData()
		{
			 
			const params = {   
				 name:this.ftarname  
		 	}	 
		 	
		 	axios.get('/selecttargets' ,{params:params})
			  .then(response => {
				  this.persons = response.data.reObject  
				})
			  .catch(function (error) {  
				 showErrTips(error) 
				});
		},
	    cutContent(content)
		{
			lenn = content.length  
			if(lenn<50)
			{
				return content
			}  
			
			str = content.substring(0,45) + "..."  
			return   str
		},
		toEdit(per)
		{ 
			  
			this.person = per
			this.tarid = this.person.id
			this.tarname = this.person.name
			this.tardetails = this.person.detail
			this.neturl  = this.person.neturl
			
			 
		},
		toSaveTarget() {
			  
			 
			 const params = { 
				id: this.tarid,
				name : this.tarname, 
				details  :this.tardetails ,
				neturl:this.neturl
			}
			 
			
             axios
			  .post('/savetarget', params)
			  .then(
			  function (response) {
				  showOKTips(params.name + "：修改成功！")
			  }  
			  )
			  .catch(function (error) { // 请求失败处理
				  showErrTips(params.name + "：修改失败！")
			});   
			 
        } ,
		showW(per)
		{
			 showTarget(per)
		}
	}
	 
}
 
vm = Vue.createApp(app).mount('#app')
 
</script>
 
</body>
</html>